<head>
  <meta name="description" content="math.js | basic usage">
  <title>math.js | basic usage</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>

<body>
<div class="header">
<h1>Segmentation Enhancement Via Curve-Fitting</h1>      
<p>Performs curve-fitting on the contour generated by segmentation models (UNET, YOLOACT, etc) such that the total number of points necessary to depict a shape is less. 
<br>
The curve fitting is achieved via Centripetal Catmull-Rom splines, which enables easy editing and provides useful information in regard to the shape of interest.</p>
</div>

<div class="main" id="MainPage">
<div class="tab">
	<button class="tablinks" onclick="openPage(event, 'CreateDataset')">Create Dataset</button>
	<button class="tablinks" onclick="openPage(event, 'FinetuneMask')" id="defaultOpen" >Finetune Mask</button>
</div>
</div>


<div id="CreateDataset" class="tabcontent">
	<!-- Dataset creation for training a deep learning model for salient points prediction. -->
<section class="two">
	<br>
	<h3> Instructions: </h3>
<ol type="1">
	<li>Upload  mask.</li>
	<li>Upload corresponding mask contour coordinates.</li>
	<li>Double-click left mouse button to remove points. Single-click left mouse button to reinstate removed points.
	<br>(removed points are marked in red rectangles; remaining points for plotting spline curve are marked in green rectangles)</li>
	<li>Click download button to download the result (reduced set of contour coordinates in binary representation).</li>
	</ol> 
</section> 
	<div class="row">
	<div class="column left">
	<div id="btn_div" class="menu">
			<label for="imageLoader">Upload mask image</label>
			<input id="imageLoader" type="file">
			<br>
				<label for="jsonLoader">Upload coordinates</label>
			<input id="jsonLoader" type="file">
			<br>
			<table id="myTable">
			<tr>
			<td>Intersect of Union</td>
			<td> NIL </td>
			</tr>	
			<tr>
			<td>No. of Original Points</td>
			<td> NIL </td>
			</tr>
			<tr>
			<td>No. of Remaining Points</td>
			<td> NIL </td>
			</tr>
			</table>
			<br>
			<button onclick="downloadJson()" > Download result </button><br/>
			<br>
	</div>
	</div>
	
	<div class="column right">
	<div class="points" >
					<canvas id="layer1_1" width="500" height="500" style="z-index:0; position: absolute">
					</canvas>
					<canvas id="layer1_2" width="500" height="500" style="z-index:1; position: absolute">
					</canvas>  
	</div>
	</div>
	</div>
</div>

<div id="FinetuneMask" class="tabcontent">
	<!-- Fine-tuning of segmentation mask obtained from image segmentation models. -->
	<section class="two">
	<br>
		<h3> Instructions: </h3>
        <ol type="1">
                <li>Upload image.</li>
                <li>Upload corresponding mask contour coordinates.</li>
                <li>Upload corresponding binary file.</li>
                <li>Double-click left mouse button to remove points. Single-click left mouse button to add points. Shift + click-and-hold left mouse button to drag existing point to new location. 
                <br>(points for plotting spline curve are marked in green rectangles)</li>
                <li>Click download button to download the canvas (enhanced segmentation mask).</li>
        </ol>  
	</section>
	<div class="row">
	<div class="column left">
	<div id="btn_div" class="menu">	
			<label for="imageLoader01">Upload mask image</label>
			<input id="imageLoader01" type="file">
			<br>
			<label for="jsonLoader01">Upload coordinates</label>
			<input id="jsonLoader01" type="file">
			<br>
			<label for="jsonLoader02">Upload binary file</label>
			<input id="jsonLoader02" type="file">
			<br>
			<button onclick="downloadCanvas()"> Download canvas </button><br/>
			<br>
			<br>
			<br>
			<br>
	</div>
	</div>
	
	<div class="column right">
	<div class="points" >
					<canvas id="layer2_1" width="500" height="500" style="z-index:0; position: absolute">
					</canvas>
					<canvas id="layer2_2" width="500" height="500" style="z-index:1; position: absolute">
					</canvas>  
	</div>
	</div>
	</div> 
</div>

<footer class="page-footer bg-light">
	<div class="text-center py-3">Capstone Project <br> Master of Technology in Intelligent Systems <br>
    <a href="https://www.iss.nus.edu.sg/"> Institute of Systems Science, NUS</a>
  </div>
</footer>

<script src="https://unpkg.com/mathjs/lib/browser/math.js"></script>
<script src="script.js"></script>
</body>